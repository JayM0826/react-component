<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/ActionSheet/index.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/daifee/react-component.git" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ChildContainer">ChildContainer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-classNames">classNames</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-createInstance">createInstance</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-config">config</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">ActionSheet</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ActionSheet">ActionSheet</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Button</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Button">Button</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Cell</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Cell">Cell</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-CellBody">CellBody</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-CellFooter">CellFooter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-CellHeader">CellHeader</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Cells">Cells</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-CellTips">CellTips</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-CellTitle">CellTitle</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Checkbox</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Checkbox">Checkbox</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">DatePicker</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/DatePicker/index.js~DatePicker.html">DatePicker</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Dialog</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Dialog">Dialog</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Fade</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Fade">Fade</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Icon</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-IconAttention">IconAttention</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-IconCheck">IconCheck</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-IconLoading">IconLoading</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">ListView</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ListView/index.js~ListView.html">ListView</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Mask</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Mask">Mask</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Notification</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Notification">Notification</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Page</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Page">Page</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Popup</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Popup">Popup</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">ScrollView</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ScrollView/index.js~ScrollView.html">ScrollView</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Select</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Select/index.js~Select.html">Select</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Switch</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Switch">Switch</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">TabBar</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-TabBar">TabBar</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-TabBarItem">TabBarItem</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Toast</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Toast">Toast</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/ActionSheet/index.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import React, {
  Component,
  PropTypes
} from &apos;react&apos;;
import &apos;./style&apos;;
import {classNames, createInstance} from &apos;../utils&apos;;
import Popup from &apos;../Popup&apos;;

let apiInstance;


/**
 * action &#x6309;&#x94AE;
 * @param {object} props see Button.propTypes
 */
function Button(props) {
  const {index, children, cancel, destroy, callback} = props;
  let className = classNames(&apos;action-sheet-item&apos;, {
    &apos;action-sheet-item-cancel&apos;: cancel,
    &apos;action-sheet-item-destroy&apos;: destroy
  });

  return (
    &lt;li className={className} onClick={() =&gt; callback(index)}&gt;
      &lt;button&gt;{children}&lt;/button&gt;
    &lt;/li&gt;
  );
}

/**
 * &#x4F20;&#x5165; Button &#x7684;&#x5C5E;&#x6027;
 * @type {Object}
 * index: &#x7D22;&#x5F15;
 * children: &#x6309;&#x94AE;&#xFF08;button&#xFF09;&#x5185;&#x5BB9;
 * cancel: &#x662F;&#x53D6;&#x6D88;&#x6309;&#x94AE;&#xFF1F;
 * destroy: &#x662F;&#x9500;&#x6BC1;&#x6309;&#x94AE;&#xFF1F;
 * callback: &#x70B9;&#x51FB; action &#x6309;&#x94AE;&#x7684;&#x56DE;&#x8C03;&#xFF0C;&#x53C2;&#x6570;&#x4E3A;&#x5BF9;&#x5E94;&#x7684; action &#x7D22;&#x5F15;
 */
Button.propTypes = {
  index: PropTypes.number.isRequired,
  children: PropTypes.node.isRequired,
  cancel: PropTypes.bool,
  destroy: PropTypes.bool,
  callback: PropTypes.func.isRequired
};

/**
 * ActionSheet UI
 * @param {object} props see ActionSheet.propTypes
 */
export default function ActionSheet(props) {
  let {
    title,
    actions,
    callback,
    cancelIndex,
    destroyIndex,
    className,
    ...others
  } = props;
  className = classNames(&apos;action-sheet&apos;, {_user: className});
  typeof cancelIndex === &apos;undefined&apos; &amp;&amp; (cancelIndex = actions.length - 1);


  return (
    &lt;div className={className} {...others}&gt;
      {title ? (&lt;header&gt;{title}&lt;/header&gt;) : null}
      &lt;ol&gt;{actions.map((content, index) =&gt; {
        return (
          &lt;Button
            key={index}
            index={index}
            cancel={cancelIndex === index}
            destroy={destroyIndex === index}
            callback={callback}&gt;
            {content}
          &lt;/Button&gt;
        );
      })}&lt;/ol&gt;
    &lt;/div&gt;
  );
}

/**
 * ActionSheet &#x7684; props
 * @type {Object}
 * title: &#x6807;&#x9898;
 * actions: &#x591A;&#x4E2A;&#x52A8;&#x4F5C; action[0] === PropTypes.node
 * callback: &#x70B9;&#x51FB;&#x52A8;&#x4F5C;&#x540E;&#x7684;&#x56DE;&#x8C03;
 * cancelIndex: &#x201C;&#x53D6;&#x6D88;&#x52A8;&#x4F5C;&#x201D;&#x7684;&#x7D22;&#x5F15;
 * destroyIndex: &#x201C;&#x9500;&#x6BC1;&#x52A8;&#x4F5C;&#x201D;&#x7684;&#x7D22;&#x5F15;
 */
ActionSheet.propTypes = {
  title: PropTypes.node,
  actions: PropTypes.array.isRequired,
  callback: PropTypes.func.isRequired,
  cancelIndex: PropTypes.number,
  destroyIndex: PropTypes.number,
  className: PropTypes.string
};

/**
 * &#x521B;&#x5EFA; ActionSheet &#x7684; ApiContainer &#x5B9E;&#x4F8B;
 * @param  {node} container {@see createInstance}
 * @return {PropTypes.element}           React elment &#x5BF9;&#x8C61;
 */
ActionSheet.getInstance = (container) =&gt; {
  return createInstance(ApiContainer, container);
};

/**
 * &#x663E;&#x793A;&#x5168;&#x5C40;ActionSheet
 * @param  {object} props      see ActionSheet.propTypes
 * @param  {object} popupProps {@see Popup}
 * @return {[type]}            [description]
 */
ActionSheet.show = (props, popupProps) =&gt; {
  apiInstance.show(props, popupProps);
};





class ApiContainer extends Component {
  state = {
    props: {
      actions: [],
      callback: () =&gt; {}
    },
    popupProps: {
      show: false
    }
  };

  render() {
    let {props, popupProps} = this.state;

    return (
      &lt;Popup {...popupProps}&gt;
        &lt;ActionSheet {...props} /&gt;
      &lt;/Popup&gt;
    );
  }

  show(props, popupProps) {
    props = this._decorateProps(props);

    let nextState = {
      props: {...this.state.props, ...props},
      popupProps: {...this.state.popupProps, ...popupProps, show: true}
    };

    this.setState(nextState);
  }

  hide() {
    let nextState = {
      ...this.state,
      popupProps: {...this.state.popupProps, show: false}
    };

    this.setState(nextState);
  }

  _decorateProps(props) {
    let callback = props.callback;
    props.callback = (index) =&gt; {
      callback &amp;&amp; callback(index);
      this.hide();
    };

    return props;
  }
}


apiInstance = createInstance(ApiContainer);
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.7)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
